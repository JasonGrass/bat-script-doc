<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第五章 set 命令详解 | my bat script document</title>
    <meta name="description" content="bat 脚本文档收集">
    <link rel="stylesheet" href="/bat-script-doc/assets/style.1aa735f0.css">
    <link rel="modulepreload" href="/bat-script-doc/assets/app.ea85244f.js">
    <link rel="modulepreload" href="/bat-script-doc/assets/bat_chapter5.md.56982ae2.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle has-sidebar" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/bat-script-doc/" data-v-6a6f7ff6><!----><!--[-->bat script document<!--]--></a></div><div class="content" data-v-8856f192><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8856f192 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/bat-script-doc/bat/chapter1.1.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->Docs<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/bat-script-doc/asserts/index.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->Asserts<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-6b5fd0a9 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-6b5fd0a9 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup" data-v-55e4c7db data-v-1f69a7ed><div class="title" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>章节正文</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/bat-script-doc/bat/chapter1.1.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.1 常用批处理内部命令简介</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter1.2.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.2 常用特殊符号</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter2.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2 DOS 循环：for 命令详解</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter3.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3 FOR 命令中的变量</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter4.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4 批处理中的变量</span><!--]--><!----></a><a class="VPLink link active" href="/bat-script-doc/bat/chapter5.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5 set 命令详解</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter6.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6 if 命令讲解</span><!--]--><!----></a><a class="VPLink link" href="/bat-script-doc/bat/chapter7.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>7 DOS 编程高级技巧</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup" data-v-55e4c7db data-v-1f69a7ed><div class="title" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>附件</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/bat-script-doc/asserts/index.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>附件</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><!----><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _bat-script-doc_bat_chapter5" data-v-79ca2460><div><h1 id="第五章-set-命令详解" tabindex="-1">第五章 set 命令详解 <a class="header-anchor" href="#第五章-set-命令详解" aria-hidden="true">#</a></h1><p>很久没发贴了,今天来写点讲 BAT 的新手教学贴! 在上一贴中我简单的介绍了一下 SET 设置自定义变量的作用,现在我来具体讲一下 set 的其 他功能. 一、用 set 命令设置自定义变量 显示、设置或删除 cmd.exe 环境变量。 SET [variable=[string]] variable 指定环境变量名。 string 指定要指派给变量的一系列字符串。 要显示当前环境变量，键入不带参数的 SET。 SET 命令不允许变量名含有等号。 例子: @echo offset var=我是值 echo %var% pause 请看 set var=我是值 ,这就是 BAT 直接在批处理中设置变量的方法! set 是命令 var 是变量名 =号右边的&quot;我是值&quot;是变量的值 在批处理中我们要引用这个变就把 var 变量名用两个%(百分号)扩起来,如%var% SET 还可以提供一个交互界面,让用户自己输入变量的值,然后我们在来根据这个值来做相应 操作,现在我就来说说 SET 的这种语法,只需要加一个&quot;/P&quot;参数就可以了! SET /P variable=[promptString] 例子: @echo off set /p var=请输入变量的值: echo 您输入了 %var% ~<em>~ pause set /p 是命令语法 var 是变量名 =号右边的&quot;请输入变量的值: &quot;,这个是提示语,不是变量 的值了! 运行后,我们在提示语后面直接输入 1,就会显示一行您输入了 1 ~</em>~ 好了,先回顾到这,现在讲 SET 其他功能 使用 set /?查看 SET 的帮助我们发现 SET 除了我上面讲的 SET [variable=[string]] SET /P variable=[promptString] 这两种语法外,还有如下几种语法: SET /A expression 环境变量替换已如下增强: %PATH:str1=str2% %PATH:~10,5% %PATH:~-10% %PATH:~0,-2% 这机种语法有什么用处呢?下面我们来一个个讲解他们! 二、用 set 命令进行简单计算 语法： SET /A expression /A 命令行开关指定等号右边的字符串为被评估的数字表达式。该表达式 评估器很简单并以递减的优先权顺序支持下列操作: () -分组 ! ~ - -一元运算符</p><ul><li>/ % -算数运算符</li></ul><ul><li><ul><li>-算数运算符 &lt;&lt; &gt;&gt; -二进制逻辑移位 &amp; -二进制按位“与” ^ -二进制按位“异”| -二进制按位“或” = <em>= /= %= += -= -算数赋值 &amp;= ^= |= &lt;&lt;= &gt;&gt;= -二进制运算赋值 , -表达式分隔符 上面这些是系统帮助里的内容,看着是不是有点晕，没关系我来简单解释一下: set 的/A 参数就是让 SET 可以支持数学符号进行加减等一些数学运算! 现在开始举例子介绍这些数学符号的用法: 例： @echo off set /p input=请输入计算表达式： set /a var=%input% echo 计算结果： %input%=%var% pause 上面的例子是龙卷风设计的，很好用哟，请看下面几个运算过程： 注意： DOS 计算只能精确到整数 请输入计算表达式： 1+9+20+30-10 计算结果： 1+9+20+30-10=50 请按任意键继续. . . 请输入计算表达式： 10/3 计算结果： 10/3=3 #DOS 计算精确到整数，小数舍了。 请按任意键继续. . . 请输入计算表达式： -100+62 计算结果： -100+62=-38 请按任意键继续. . . 请输入计算表达式： 100%3 ＃求余数 计算结果： 100%3=1 请按任意键继续. . . 请输入计算表达式： (25+75)<em>2/(15+5) 计算结果： (25+75)<em>2/(15+5)=10 请按任意键继续. . . 请输入计算表达式： 1234567890</em>9876543210 无效数字。数字精确度限为 32 位。 计算结果： 1234567890</em>9876543210= 请按任意键继续. . . 注意：上面的计算过程显示， DOS 计算只能精确到 32 位，这个 32 位是指二进制 32 位，其 中最高位为符号位（0 为正， 1 为负），低位 31 位为数值。 31 个 1 换成十进制为 2147483647， 所以 DOS 计算的有效值范围是-2147483647 至 2147483647，超出该数值范围时计算出错， 请看下面的计算过程： 请输入计算表达式： 2147483647-1 ＃最大值减 1，值有效 计算结果： 2147483647-1=2147483646 请按任意键继续. . . 运行 set /a a=1+1,b=2+1,c=3+1 后会显示一个 4,但我们用echo %a% %b% %c%后看结果,会发现其他数学运算也有效果!,这就是&quot;逗&quot;号的 作用! 有时候我们需要直接在原变量进行加减操作就可以用这种语法 set /a var+=1 这样的语法对应原始语法就是 set /a var = %var% + 1 都是一样的结果,在原变量的值上在进行数学运算,不过这样写简单一点 再来一个: set /a var</em>=2 其他都这么用,只要帮助里有这个语法! 另外还有一些用逻辑或取余操作符,这些符号,按照上面的使用方法会报错的 比如我们在 CMD 里输入 set /a var=1 &amp; 1 &quot;与运算&quot;,他并不会显示为 1,而是报错, 为什么?对于这样的&quot;逻辑或取余操作符&quot;,我们需要把他们用双引号引起来,也可以用转义字 符^，看例子 set /a var= 1 &quot;&amp;&quot; 1 这样结果就显示出来了,其他逻辑或取余操作符用法 set /a var= 1 &quot;+&quot; 1 异运算 set /a var= 1 &quot;%&quot; 1 取模运算 set /a var= 3 &quot;&lt;&lt;&quot; 2 左移位运算， 3 的二进制为 11，左移 2 位为 1100，换成十进制就是 12， 自行验证 set /a var= 4 &quot;&gt;&gt;&quot; 2 右移位运算， 4 的二进制为 100，右移动 2 位为 1，结果为 1 还有几个数学不太行,搞不清楚了....不列出来了, 龙卷风补充：凡是按位计算均需换算成二进制，下面行中的符号均针对二进制 这些符号也可以用&amp;= ^= |= &lt;&lt;= &gt;&gt;= 这样的简单用法如 set /a var&quot;&amp;=&quot; 1 等于 set /a var = %var% &quot;&amp;&quot; 1 注意引号 思考题：求 2 的 n 次方 答案： @echo off set /p n=请输入 2 的几次方: set /a num=1^&lt;^&lt;n echo %num% pause 三、用 set 命令进行字符串处理 1、字符串替换 好了，符号说到这，现在说%PATH:str1=str2% 上面语法的意思就是：将字符串变量%PATH%中的 str1 替换为 str2 这个是替换变量值的内容,看例子 @echo off set a= bbs. verybat. cn echo 替换前的值: &quot;%a%&quot;set var=%a: =% echo 替换后的值: &quot;%var%&quot; pause 运行显示：（龙卷风添加） 替换前的值: &quot; bbs. verybat. cn&quot; 替换后的值: &quot;<a href="http://bbs.verybat.cn" target="_blank" rel="noopener noreferrer">bbs.verybat.cn</a>&quot; 对比一下,我们发现他把变量%a%的空格给替换掉了,从这个例子,我们就可以发现 %PATH:str1=str2%这个操作就是把变量%PATH%的里的 str1 全部用 str2 替换 比如我们把上面的例子改成这样 @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> echo 替换前的值: &quot;%a%&quot; set var=%a:.=伤脑筋% echo 替换后的值: &quot;%var%&quot; pause 运行显示： 替换前的值: &quot;<a href="http://bbs.verybat.cn" target="_blank" rel="noopener noreferrer">bbs.verybat.cn</a>&quot; 替换后的值: &quot;bbs 伤脑筋 verybat 伤脑筋 cn&quot; 解释 set var=%a:.=伤脑筋% set 是命令 var 是变量名 字 a 是要进行字符替换的变量的值,&quot;.&quot;为要替换的值, &quot;伤脑筋&quot;为替换后的值! 执行后就会把变量%a%里面的&quot;.&quot;全部替换为&quot;伤脑筋&quot; 这就是 set 的替换字符的很好的功能! 替换功能先讲到这，下面将字符串截取功能 2、字符串截取</li></ul></li></ul><hr><p>截取功能统一语法格式为： %a:~[m[,n]]%</p><hr><p>方括号表示可选， %为变量标识符， a 为变量名，不可少，冒号用于分隔变量名和说明部分， 符号～可以简单理解为“偏移”即可， m 为偏移量（缺省为 0）， n 为截取长度（缺省为全部） %PATH:~10,5% 这个什么意思,看例子: 截取功能例子 1： @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> set var=%a:~1,2% echo %var% pause 执行后,我们会发现只显示了&quot;bs&quot;两个字母,我们的变量%a%的值不是为 <a href="http://bbs.verybat.cn" target="_blank" rel="noopener noreferrer">bbs.verybat.cn</a> 吗？ 怎么只显示了第 2 个字母和第 3 个字母&quot;bs&quot;,分析一结果我们就可以很容易看出 %PATH:~10,5%就是显示变量 PATH 里从 11 位（偏移量 10）开始的 5 个字符! 分析 set var=%a:~1,2% set 是命令， var 是变量值， a 要进行字符操作的变量， &quot;1&quot;从变量&quot;a&quot;第几位开始显示， &quot;2&quot;表示显示几位。 合起来就是把变量 a 的值从第 2 位（偏移量 1）开始,把 2 个字符赋予给变量 var 这样应该明白了吧~ 其他两种语法 %PATH:~-10% %PATH:~0,-2% 他们也是显示指定变量指定几位的值的意思 %PATH:~-10% 看例子 截取功能例子 2： @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> set var=%a:~-3% echo %var% pause 运行结果： .cn 这个就是把变量 a 倒数 3 位的值给变量 VAR 当然我们也可以改成这样 截取功能例子 3： @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> set var=%a:~3% echo %var% pause 运行显示： .verybat.cn 这个就是把变量 a 的从第 3 位开始后面全部的值给变量 VAR %PATH:~0,-2% 例子 截取功能例子 4： @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> set var=%a:~0,-3% echo %var% pause 执行后,我们发现显示的是&quot;bbs.verybat&quot;,少了&quot;.cn&quot; 从结果分析,很容易分析出,这是把变量 a 的值从 0 位开始, 到倒数第三位之间的值全部赋予给 var 如果改成这样 截取功能例子 5： @echo off set <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> set var=%a:~2,-3% echo %var% pause 运行显示： s.verybat 那么他就是显示从第 3 位（偏移量 2）开始减去倒数三位字符的值,并赋予给变量 var讲得好，例子就是说明问题，为便于记忆，龙卷风小节如下： <a href="http://a=bbs.verybat.cn" target="_blank" rel="noopener noreferrer">a=bbs.verybat.cn</a> %a:~1,2% ＝“bs” 偏移量 1，从第二位开始向右取 2 位 %a:~-3% ＝“.cn” 偏移量负 3，即倒数 3 位（也可理解为留下右边 3 位），右取全部 %a:~3% ＝“.verybat.cn” 偏移量 3（也可理解为去掉左边 3 位），右取全部 %a:~0,-3% ＝“bbs.verybat” 偏移量 0，右取长度至负 3，即倒数 3 位 %a:~2,-3% ＝“s.verybat” 偏移量 2，右取长度至负 3，即倒数 3 位</p><hr><p>所以，截取功能统一语法格式为： %a:~[m[,n]]%</p><hr><p>方括号表示可选， %a%为变量名，不可少，冒号用于分隔变量名和说明部分，符号～可以 简单理解为“偏移”即可， m 为偏移量（缺省为 0）， n 为截取长度（缺省为全部） 上面所述用法其实相当于 vbs 函数 mid、 left、 right %a:~0,n% 相当于函数 left(a,n) 取左边 n 位 %a:~-m% 相当于函数 right（a,m） 取右边 m 位 %a:~m,n% 相当于函数 mid(a,m+1,n) 从 m+1 位开始取 n 位 %a:~m,-n% 相当于函数 mid(a,m+1,len(a)-m-n) %a:~m % 相当于函数 mid(a,m+1,len(a)-m) 或者 right(a,len(a)-m) 思考题目：输入任意字符串，求字符串的长度 参考答案： @echo off set /p str=请输入任意长度的字符串: echo 你输入了字符串:&quot;%str%&quot; if not defined str (pause &amp; goto :eof) set num=0 :len set /a num+=1 set str=%str:~0,-1% if defined str goto len echo 字符串长度为： %num% pause 好了 set 的一些用法,就介绍到这了,希望对各位有所帮助,时间不早睡觉 Zz.... by 伤脑筋</p></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><!----><!----></div><div class="prev-next" data-v-04568844><div class="pager" data-v-04568844><a class="pager-link prev" href="/bat-script-doc/bat/chapter4.html" data-v-04568844><span class="desc" data-v-04568844>Previous page</span><span class="title" data-v-04568844>4 批处理中的变量</span></a></div><div class="has-prev pager" data-v-04568844><a class="pager-link next" href="/bat-script-doc/bat/chapter6.html" data-v-04568844><span class="desc" data-v-04568844>Next page</span><span class="title" data-v-04568844>6 if 命令讲解</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"asserts_index.md\":\"851a12ba\",\"bat_chapter1.1.md\":\"4f89cd34\",\"bat_chapter1.2.md\":\"c5774916\",\"bat_chapter2.md\":\"df1ca47d\",\"bat_chapter3.md\":\"8e3b7aa6\",\"bat_chapter4.md\":\"82373085\",\"bat_chapter5.md\":\"56982ae2\",\"bat_chapter6.md\":\"0c7df55d\",\"bat_chapter7.md\":\"75ece67f\",\"index.md\":\"a37e3a02\"}")</script>
    <script type="module" async src="/bat-script-doc/assets/app.ea85244f.js"></script>
    
  </body>
</html>